<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> TypeScript Spec Version 1.8 - Ambient Declarations (Object Types) · Shane Hsi Rocks</title><meta name="description" content="Ambient DeclarationAmbient Declaration
An ambient declaration introduces a variable into a TypeScript scope, but has zero impact on the emitted JavaScript program. 
引入一个变量，仅在 TypeScript 范围，不会生成 JavaScript 代码。
12&lt;/span"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="http://fonts.useso.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">博客</a></li><li class="nav-list-item"><a href="https://github.com/shane13hsi" target="_blank" class="nav-list-link">GITHUB</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">TypeScript Spec Version 1.8 - Ambient Declarations (Object Types)</h1><div class="post-meta"><div class="post-time">Feb 26, 2016</div></div><div class="post-content"><h2 id="Ambient_Declaration"><a href="#Ambient_Declaration" class="headerlink" title="Ambient Declaration"></a>Ambient Declaration</h2><p><a href="https://github.com/Microsoft/TypeScript/blob/master/doc/spec.md#11-ambient-declarations" target="_blank" rel="external">Ambient Declaration</a></p>
<p>An ambient declaration introduces a variable into a TypeScript scope, but has zero impact on the emitted JavaScript program. </p>
<p>引入一个变量，仅在 TypeScript 范围，不会生成 JavaScript 代码。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">declare <span class="keyword">var</span> <span class="built_in">document</span>;  </span><br><span class="line"><span class="built_in">document</span>.title = <span class="string">"Hello"</span></span><br></pre></td></tr></table></figure>
<p>Section 1.3 provides a more extensive example of how a programmer can add type information for jQuery and other libraries.</p>
<h2 id="Object_Types"><a href="#Object_Types" class="headerlink" title="Object Types"></a>Object Types</h2><p><a href="https://github.com/Microsoft/TypeScript/blob/master/doc/spec.md#1.3" target="_blank" rel="external">1.3 Object Types</a></p>
<p>TypeScript programmers use object types to declare their expectations of object behavior. </p>
<p>适用 object types 声明对象的行为。</p>
<p>主要接着 ambient declaration，对 jQuery 的声明。</p>
<p>先了解下 object tyeps：</p>
<h3 id="object_type_literal"><a href="#object_type_literal" class="headerlink" title="object type literal"></a>object type literal</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> MakePoint: () =&gt; &#123;  </span><br><span class="line">    x: number; y: number;  </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="interface"><a href="#interface" class="headerlink" title="interface"></a>interface</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">interface Friend &#123;  </span><br><span class="line">    name: string;  </span><br><span class="line">    favoriteColor?: string;  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">friend: Friend</span>) </span>&#123;  </span><br><span class="line">    <span class="keyword">var</span> name = friend.name;  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">add(&#123; name: <span class="string">"Fred"</span> &#125;);  <span class="comment">// Ok  </span></span><br><span class="line">add(&#123; favoriteColor: <span class="string">"blue"</span> &#125;);  <span class="comment">// Error, name required  </span></span><br><span class="line">add(&#123; name: <span class="string">"Jill"</span>, favoriteColor: <span class="string">"green"</span> &#125;);  <span class="comment">// Ok</span></span><br></pre></td></tr></table></figure>
<h3 id="jQuery_Ambient_Declaration"><a href="#jQuery_Ambient_Declaration" class="headerlink" title="jQuery Ambient Declaration"></a>jQuery Ambient Declaration</h3><p>结果：</p>
<ul>
<li><code>$</code> 有 methods，fields</li>
<li><code>$</code> 本身也是 function</li>
<li><code>$</code> 作为 function 还可以被 overload</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">interface JQuery &#123;  </span><br><span class="line">    text(content: string);  </span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line">interface JQueryStatic &#123;  </span><br><span class="line">    get(url: string, callback: (data: string) =&gt; any);     </span><br><span class="line">    (query: string): JQuery;  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">declare <span class="keyword">var</span> $: JQueryStatic;</span><br><span class="line"></span><br><span class="line">$.get(<span class="string">"http://mysite.org/divContent"</span>,  </span><br><span class="line">      <span class="function"><span class="keyword">function</span> (<span class="params">data: string</span>) </span>&#123;  </span><br><span class="line">          $(<span class="string">"div"</span>).text(data);  </span><br><span class="line">      &#125;  </span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>The ‘JQueryStatic’ interface references another interface: ‘JQuery’. </p>
<p>Finally, the ‘JQueryStatic’ interface contains a bare function signature</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(query: string): JQuery;</span><br></pre></td></tr></table></figure>
<p>The bare signature indicates that instances of the interface are callable. 接口的实例是可以被调用的。</p>
<p>This example illustrates that TypeScript function types are just special cases of TypeScript object types. Specifically, function types are object types that contain one or more call signatures. Function types 是 object types 的一种，即包含一个以上的 call signature。</p>
<p>Function types 也可以用 literal 表示。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> f: &#123; (): string; &#125;;  </span><br><span class="line"><span class="keyword">var</span> sameType: () =&gt; string = f;     <span class="comment">// Ok  </span></span><br><span class="line"><span class="keyword">var</span> nope: () =&gt; number = sameType;  <span class="comment">// Error: type mismatch</span></span><br></pre></td></tr></table></figure>
<p>重载。To specify multiple behaviors, TypeScript supports overloading of function signatures in object types. </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">interface JQueryStatic &#123;  </span><br><span class="line">    get(url: string, callback: (data: string) =&gt; any);     </span><br><span class="line">    (query: string): JQuery;</span><br><span class="line">    (ready: () =&gt; any): any; <span class="comment">// overload</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</div></article></div></section><footer><div class="paginator"><a href="/2016/02/26/TypeScript-Spec-Version-1-8-Classes/" class="prev">上一篇</a><a href="/2016/02/25/Alternative-to-iFrames-with-HTML5/" class="next">下一篇</a></div></footer><script src="https://cdn.bootcss.com/mathjax/2.5.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></body></html>